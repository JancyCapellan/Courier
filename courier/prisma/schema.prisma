// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  previewFeatures = ["interactiveTransactions"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id Int @id @default(autoincrement())
  firstName String
  lastName String
  middleName String?
  password String
  email String @unique
  role String
  company String?
  branchName String?
  lastSaleDate DateTime?
  lastLogin DateTime?
  preferredLanguage String @default("English")
  licenseId Int? @unique
  addresses address[]
  orders Order[]
}
model address {
  id Int @id @default(autoincrement())
  userId Int
  address String
  address2 String?
  address3 String?
  city String
  state String
  postalCode Int
  country String
  cellphone String?
  telephone String?
  default Boolean @default(false)
  recipient Boolean @default(false)
  user User @relation(fields: [userId], references:[id] )
  shipperAddress OrderAddresses[] @relation("shipperAddress")
  recieverAddress OrderAddresses[] @relation("recieverAddress")
}
model Order {
  id Int @id @default(autoincrement())
  userId Int
  timePlaced DateTime @default(now())
  recieverFirstName String
  recieverLastName String
  totalItems Int
  totalPrice Int
  items OrderItem[]
  addresses OrderAddresses[]
  user User @relation(fields: [userId], references:[id] )
}

model OrderAddresses{
  id Int @id @default(autoincrement())
  orderId Int
  shippedFrom Int
  shippedTo Int
  shipper address @relation("shipperAddress", fields: [shippedFrom], references:[id])
  reciever address @relation("recieverAddress",fields: [shippedTo], references:[id])
  order Order @relation(fields: [orderId],references:[id] )

}

model OrderItem {
  id Int @id @default(autoincrement())
  orderId Int
  productsId Int
  quantity Int
  order Order @relation(fields: [orderId],references:[id] )
  product product @relation(fields: [productsId], references:[id])

}

model product {
  id Int @id @default(autoincrement())
  name  String
  price Int
  type Int
  orderItem OrderItem[]
  productType productType? @relation(fields: [type], references:[id])

}

model productType {
  id Int @id @default(autoincrement())
  type String
  product product[]
}

// add products to table
// add table for drivers, routes, route packages
// add table warehouse batches info